<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Enduring Legacy: Our Family's Indigenous Heritage</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/glider-js/1.7.8/glider.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDF8F0;
            color: #433A3F;
        }
        .font-display {
            font-family: 'Playfair Display', serif;
        }
        /* Tab Styles */
        .tab-button {
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            padding: 0.75rem 1rem;
        }
        .tab-button.active {
            border-bottom-color: #D97706;
            color: #D97706;
        }
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        .tab-content.active {
            display: block;
        }
        /* Timeline Styles */
        .timeline-item {
            cursor: pointer;
            transition: transform 0.2s ease-in-out;
        }
        .timeline-item:hover {
            transform: translateY(-5px);
        }
        .timeline-item.active .timeline-dot {
            background-color: #D97706;
            transform: scale(1.5);
        }
        .timeline-item.active .timeline-date {
            color: #D97706;
            font-weight: 700;
        }
        .timeline-content-panel {
            display: none;
            border-left: 2px solid #D97706;
            animation: fadeIn 0.5s ease-in-out;
        }
        .timeline-content-panel.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Form Styles */
        .form-section-title {
            position: relative;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            font-size: 1.5rem;
            font-family: 'Playfair Display', serif;
        }
        .form-section-title::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 50px;
            height: 3px;
            background-color: #D97706;
            border-radius: 9999px;
        }
        /* Social Sharing */
        .share-btn {
            transition: all 0.2s ease;
        }
        .share-btn:hover {
            transform: translateY(-2px);
        }
        .facebook-btn:hover { color: #3b5998; }
        .twitter-btn:hover { color: #1da1f2; }
        .linkedin-btn:hover { color: #0077b5; }
        .whatsapp-btn:hover { color: #25d366; }
        .email-btn:hover { color: #d44638; }
        /* Subscription Form */
        .subscribe-form {
            background: linear-gradient(135deg, rgba(217,119,6,0.1) 0%, rgba(253,248,240,0.8) 100%);
            border: 1px solid rgba(217,119,6,0.3);
        }
    </style>
</head>
<body class="antialiased">
    <div class="container mx-auto p-4 md:p-8 max-w-6xl">

        <!-- Social Sharing Floating Button -->
        <div class="fixed right-4 bottom-4 z-50">
            <div class="relative group">
                <button id="shareToggle" class="w-14 h-14 rounded-full bg-amber-600 text-white shadow-lg flex items-center justify-center hover:bg-amber-700 transition">
                    <i class="fas fa-share-alt text-xl"></i>
                </button>
                <div id="shareMenu" class="absolute right-0 bottom-16 mb-2 hidden group-hover:block bg-white rounded-lg shadow-lg p-2 w-48">
                    <button class="share-btn facebook-btn w-full text-left px-4 py-2 hover:bg-gray-100 rounded flex items-center">
                        <i class="fab fa-facebook mr-2"></i> Facebook
                    </button>
                    <button class="share-btn twitter-btn w-full text-left px-4 py-2 hover:bg-gray-100 rounded flex items-center">
                        <i class="fab fa-twitter mr-2"></i> Twitter
                    </button>
                    <button class="share-btn linkedin-btn w-full text-left px-4 py-2 hover:bg-gray-100 rounded flex items-center">
                        <i class="fab fa-linkedin mr-2"></i> LinkedIn
                    </button>
                    <button class="share-btn whatsapp-btn w-full text-left px-4 py-2 hover:bg-gray-100 rounded flex items-center">
                        <i class="fab fa-whatsapp mr-2"></i> WhatsApp
                    </button>
                    <button class="share-btn email-btn w-full text-left px-4 py-2 hover:bg-gray-100 rounded flex items-center">
                        <i class="fas fa-envelope mr-2"></i> Email
                    </button>
                </div>
            </div>
        </div>

        <!-- Slideshow Header -->
        <div class="featured-slideshow">
            <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1566438480900-0609be27a4be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1790&q=80');">
                <div class="slide-content">
                    <h2 class="font-display text-3xl md:text-4xl font-bold mb-2">Rediscovering Our Taíno Roots</h2>
                    <p class="text-lg">Explore how DNA and oral histories reveal our family's deep connection to Jamaica's first people</p>
                    <a href="#tab-story" class="inline-block mt-4 px-6 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 transition">Our Story</a>
                </div>
            </div>
            <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80');">
                <div class="slide-content">
                    <h2 class="font-display text-3xl md:text-4xl font-bold mb-2">Preservation in Action</h2>
                    <p class="text-lg">Learn from global indigenous communities how we can reclaim and protect our heritage</p>
                    <a href="#tab-lessons" class="inline-block mt-4 px-6 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 transition">Global Lessons</a>
                </div>
            </div>
            <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1508511269-185eceb43e2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1742&q=80');">
                <div class="slide-content">
                    <h2 class="font-display text-3xl md:text-4xl font-bold mb-2">Building Our Family Archive</h2>
                    <p class="text-lg">Contribute to our growing digital repository of family history and connections</p>
                    <a href="#tab-tree" class="inline-block mt-4 px-6 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 transition">Document Now</a>
                </div>
            </div>
            <div class="slide-nav">
                <button class="slide-prev" aria-label="Previous slide">❮</button>
                <button class="slide-next" aria-label="Next slide">❯</button>
            </div>
            <div class="slide-indicators">
                <div class="slide-indicator active" data-index="0"></div>
                <div class="slide-indicator" data-index="1"></div>
                <div class="slide-indicator" data-index="2"></div>
            </div>
        </div>

        <!-- Header Section -->
        <header class="text-center mb-12">
            <h1 class="font-display text-4xl md:text-6xl font-bold text-[#6D4C41] mb-4">The Enduring Legacy</h1>
            <p class="text-lg md:text-xl text-gray-700 max-w-3xl mx-auto">As descendants of native-born Indigenous people of Jamaica, our family carries a story of survival, resilience, and profound connection to the island's true ancestral roots. This interactive journey explores our history, the path to preservation, and our role in this living heritage.</p>
            
            <!-- Subscription Callout -->
            <div class="subscribe-form mt-8 p-6 rounded-lg max-w-2xl mx-auto">
                <h3 class="font-display text-2xl font-bold text-[#6D4C41] mb-2">Stay Connected</h3>
                <p class="text-gray-700 mb-4">Join our community to receive updates on new discoveries, events, and ways to contribute to preserving our heritage.</p>
                <form id="subscribeForm" class="flex flex-col sm:flex-row gap-2">
                    <input type="email" id="subscribeEmail" placeholder="Your email address" required class="flex-grow px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-amber-500">
                    <button type="submit" class="px-6 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 transition">Subscribe</button>
                </form>
                <div id="subscribeMessage" class="mt-2 text-sm"></div>
                <div class="mt-4 flex justify-center space-x-4">
                    <a href="#" class="text-gray-700 hover:text-amber-600 transition"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="text-gray-700 hover:text-amber-600 transition"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="text-gray-700 hover:text-amber-600 transition"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="text-gray-700 hover:text-amber-600 transition"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="mb-8 border-b border-gray-300">
            <nav id="tab-nav" class="flex flex-wrap -mb-px" aria-label="Tabs">
                <button class="tab-button text-lg font-semibold" data-target="tab-story">Our Story & Timeline</button>
                <button class="tab-button text-lg font-semibold" data-target="tab-lessons">Global Lessons</button>
                <button class="tab-button text-lg font-semibold" data-target="tab-action">Actionable Steps</button>
                <button class="tab-button text-lg font-semibold" data-target="tab-tree">Document Our History</button>
            </nav>
        </div>

        <!-- Tab Content -->
        <div id="tab-content-container">
            <!-- Tab 1: Our Story & Timeline -->
            <div id="tab-story" class="tab-content">
                <section class="mb-16">
                    <h2 class="font-display text-3xl font-bold text-center mb-8 text-[#6D4C41]">An Interactive Timeline of Survival</h2>
                    <div class="w-full max-w-4xl mx-auto">
                        <div class="flex justify-between items-center border-b-2 border-gray-300 pb-4">
                            <div id="timeline-nav" class="grid grid-cols-2 sm:grid-cols-5 gap-4 w-full"></div>
                        </div>
                        <div id="timeline-content-container" class="mt-8"></div>
                    </div>
                </section>
            </div>

            <!-- Tab 2: Global Lessons -->
            <div id="tab-lessons" class="tab-content">
                 <h2 class="font-display text-3xl font-bold text-center mb-8 text-[#6D4C41]">Lessons in Heritage Preservation</h2>
                 <p class="text-center text-lg max-w-3xl mx-auto mb-10">Restoring and preserving our Indigenous Jamaican ancestral history requires a thoughtful blend of global strategies and deep cultural sensitivity. Here are key lessons from global heritage efforts, adapted for Jamaica's context.</p>
                 <div class="space-y-8 max-w-4xl mx-auto">
                    <!-- Content remains exactly the same as before -->
                 </div>
            </div>

            <!-- Tab 3: Actionable Steps -->
            <div id="tab-action" class="tab-content">
                <!-- Content remains exactly the same as before -->
            </div>

            <!-- Tab 4: Document Our History -->
            <div id="tab-tree" class="tab-content">
                <!-- Content remains exactly the same as before -->
            </div>
        </div>

        <!-- Footer with Sharing Options -->
        <footer class="mt-16 pt-8 border-t border-gray-200">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h3 class="font-display text-xl font-bold text-[#6D4C41]">Share Our Story</h3>
                    <div class="flex space-x-4 mt-2">
                        <button class="share-btn facebook-btn text-gray-700 hover:text-[#3b5998]">
                            <i class="fab fa-facebook-f text-xl"></i>
                        </button>
                        <button class="share-btn twitter-btn text-gray-700 hover:text-[#1da1f2]">
                            <i class="fab fa-twitter text-xl"></i>
                        </button>
                        <button class="share-btn linkedin-btn text-gray-700 hover:text-[#0077b5]">
                            <i class="fab fa-linkedin-in text-xl"></i>
                        </button>
                        <button class="share-btn whatsapp-btn text-gray-700 hover:text-[#25d366]">
                            <i class="fab fa-whatsapp text-xl"></i>
                        </button>
                        <button class="share-btn email-btn text-gray-700 hover:text-[#d44638]">
                            <i class="fas fa-envelope text-xl"></i>
                        </button>
                    </div>
                </div>
                <div class="text-center md:text-right">
                    <p class="text-gray-600">&copy; 2023 The Enduring Legacy Project</p>
                    <p class="text-sm text-gray-500 mt-1">Preserving Indigenous Jamaican Heritage</p>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/glider-js/1.7.8/glider.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- SLIDESHOW LOGIC ---
        const slides = document.querySelectorAll('.slide');
        const indicators = document.querySelectorAll('.slide-indicator');
        let currentSlide = 0;
        
        function showSlide(index) {
            slides.forEach(slide => slide.classList.remove('active'));
            indicators.forEach(indicator => indicator.classList.remove('active'));
            
            slides[index].classList.add('active');
            indicators[index].classList.add('active');
            currentSlide = index;
        }
        
        document.querySelector('.slide-prev').addEventListener('click', () => {
            const newIndex = (currentSlide - 1 + slides.length) % slides.length;
            showSlide(newIndex);
        });
        
        document.querySelector('.slide-next').addEventListener('click', () => {
            const newIndex = (currentSlide + 1) % slides.length;
            showSlide(newIndex);
        });
        
        indicators.forEach(indicator => {
            indicator.addEventListener('click', () => {
                showSlide(parseInt(indicator.dataset.index));
            });
        });
        
        // Auto-advance slides every 5 seconds
        setInterval(() => {
            const newIndex = (currentSlide + 1) % slides.length;
            showSlide(newIndex);
        }, 5000);

        // --- SOCIAL SHARING FUNCTIONALITY ---
        function shareOnSocial(platform) {
            const url = encodeURIComponent(window.location.href);
            const title = encodeURIComponent(document.title);
            let shareUrl = '';
            
            switch(platform) {
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${title}`;
                    break;
                case 'linkedin':
                    shareUrl = `https://www.linkedin.com/shareArticle?mini=true&url=${url}&title=${title}`;
                    break;
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${title}%20${url}`;
                    break;
                case 'email':
                    shareUrl = `mailto:?subject=${title}&body=Check%20this%20out:%20${url}`;
                    break;
            }
            
            window.open(shareUrl, '_blank', 'width=600,height=400');
        }

        // Attach event listeners to all share buttons
        document.querySelectorAll('.facebook-btn').forEach(btn => {
            btn.addEventListener('click', () => shareOnSocial('facebook'));
        });
        document.querySelectorAll('.twitter-btn').forEach(btn => {
            btn.addEventListener('click', () => shareOnSocial('twitter'));
        });
        document.querySelectorAll('.linkedin-btn').forEach(btn => {
            btn.addEventListener('click', () => shareOnSocial('linkedin'));
        });
        document.querySelectorAll('.whatsapp-btn').forEach(btn => {
            btn.addEventListener('click', () => shareOnSocial('whatsapp'));
        });
        document.querySelectorAll('.email-btn').forEach(btn => {
            btn.addEventListener('click', () => shareOnSocial('email'));
        });

        // Floating share button toggle
        const shareToggle = document.getElementById('shareToggle');
        const shareMenu = document.getElementById('shareMenu');
        
        shareToggle.addEventListener('click', () => {
            shareMenu.classList.toggle('hidden');
        });

        // Close share menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!shareToggle.contains(e.target) && !shareMenu.contains(e.target)) {
                shareMenu.classList.add('hidden');
            }
        });

        // --- SUBSCRIPTION FORM ---
        const subscribeForm = document.getElementById('subscribeForm');
        const subscribeMessage = document.getElementById('subscribeMessage');
        
        subscribeForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('subscribeEmail').value;
            
            // Simple validation
            if (!email.includes('@')) {
                subscribeMessage.textContent = 'Please enter a valid email address';
                subscribeMessage.className = 'mt-2 text-sm text-red-600';
                return;
            }
            
            // In a real implementation, you would send this to your server
            subscribeMessage.textContent = 'Thank you for subscribing!';
            subscribeMessage.className = 'mt-2 text-sm text-green-600';
            subscribeForm.reset();
            
            // Clear message after 5 seconds
            setTimeout(() => {
                subscribeMessage.textContent = '';
            }, 5000);
        });

        // --- TAB LOGIC ---
        const tabNav = document.getElementById('tab-nav');
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        function setActiveTab(targetId) {
            tabButtons.forEach(button => button.classList.toggle('active', button.dataset.target === targetId));
            tabContents.forEach(content => content.classList.toggle('active', content.id === targetId));
            
            // Update URL hash for deep linking
            window.location.hash = targetId;
        }
        tabNav.addEventListener('click', (e) => {
            if (e.target.classList.contains('tab-button')) setActiveTab(e.target.dataset.target);
        });

        // Check for hash on page load
        if (window.location.hash) {
            const targetTab = document.querySelector(`.tab-button[data-target="${window.location.hash}"]`);
            if (targetTab) {
                setActiveTab(window.location.hash.substring(1));
            }
        }

        // --- TIMELINE LOGIC ---
        const timelineData = [
            { id: 'pre1494', date: 'Pre-1494', title: 'The Flourishing of Xaymaca', content: `<h3 class="font-bold text-2xl mb-2 text-amber-700">The Land of Wood and Water</h3><p class="text-gray-600">Before European contact, Jamaica, known as Xaymaca, was a thriving hub for the Taíno people. Their society was organized into chiefdoms (cacicazgos), and they were master agriculturalists, cultivating yuca, sweet potatoes, and maize. Their spiritual life was rich, centered on the worship of zemís.</p>`},
            { id: '1494', date: '1494-1509', title: 'The Arrival & Disruption', content: `<h3 class="font-bold text-2xl mb-2 text-amber-700">A World Turned Upside Down</h3><p class="text-gray-600">The arrival of Christopher Columbus marked a catastrophic disruption. The Spanish introduced new diseases and the brutal encomienda system, a form of forced labor. The Taíno population plummeted, and their way of life was irrevocably altered.</p>`},
            { id: '1500s', date: '1500s-1600s', title: 'Genocide, Survival & The Myth of Extinction', content: `<h3 class="font-bold text-2xl mb-2 text-amber-700">Survival in the Shadows</h3><p class="text-gray-600">Colonial accounts declared the Taíno "extinct," but this was a myth. They survived by retreating to the mountainous interior, and by intermarrying with arriving Africans and Europeans, blending their cultures, knowledge, and genes. Taíno knowledge was vital for the survival of all groups on the island.</p>`},
            { id: '1700s', date: '1700s-1800s', title: 'Maroons & Hidden Heritage', content: `<h3 class="font-bold text-2xl mb-2 text-amber-700">Resistance and Resilience</h3><p class="text-gray-600">Enslaved Africans escaped into the interior, joining remnant Taíno communities to form the Jamaican Maroons. Their culture is a rich syncretism of African and Indigenous traditions, and their deep knowledge of the land for guerilla warfare and herbal medicine has strong Taíno roots.</p>`},
            { id: '1900s', date: '1900s-Present', title: 'Reclamation & Revival', content: `<h3 class="font-bold text-2xl mb-2 text-amber-700">The Voice of a People Re-emerges</h3><p class="text-gray-600">The 20th and 21st centuries have seen a powerful movement to reclaim and celebrate Jamaica's Indigenous identity. Descendants are actively working to preserve their language, spiritual practices, and cultural traditions, challenging old colonial myths and honoring the ancestors who endured.</p>`}
        ];
        const timelineNavContainer = document.getElementById('timeline-nav');
        const timelineContentContainer = document.getElementById('timeline-content-container');
        timelineData.forEach(item => {
            const navItem = document.createElement('div');
            navItem.className = 'timeline-item text-center group';
            navItem.dataset.target = item.id;
            navItem.innerHTML = `<div class="flex justify-center items-center"><div class="timeline-dot w-4 h-4 bg-gray-300 rounded-full transition-all duration-300"></div></div><p class="timeline-date mt-2 text-sm md:text-base font-semibold text-gray-500">${item.date}</p>`;
            timelineNavContainer.appendChild(navItem);
            const contentPanel = document.createElement('div');
            contentPanel.id = item.id;
            contentPanel.className = 'timeline-content-panel p-6';
            contentPanel.innerHTML = item.content;
            timelineContentContainer.appendChild(contentPanel);
        });
        const timelineItems = document.querySelectorAll('.timeline-item');
        function setActiveTimelineItem(targetId) {
            timelineItems.forEach(item => item.classList.toggle('active', item.dataset.target === targetId));
            document.querySelectorAll('.timeline-content-panel').forEach(content => content.classList.toggle('active', content.id === targetId));
        }
        timelineItems.forEach(item => item.addEventListener('click', () => setActiveTimelineItem(item.dataset.target)));

        // --- FORM LOGIC ---
        let childCount = 0;
        let addressCount = 0;
        const childrenContainer = document.getElementById('childrenContainer');
        const addressesContainer = document.getElementById('addressesContainer');

        function createChildEntry(index) {
            const container = document.createElement('div');
            container.className = 'dynamic-entry-container grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4';
            container.innerHTML = `<button type="button" class="remove-button">&times;</button><div><label for="childName_${index}" class="block text-sm font-medium text-gray-700">Child's Name ${index + 1}</label><input type="text" id="childName_${index}" name="childName_${index}" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"></div><div><label for="childRelationship_${index}" class="block text-sm font-medium text-gray-700">Relationship Type</label><select id="childRelationship_${index}" name="childRelationship_${index}" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"><option value="Biological">Biological</option><option value="Adopted">Adopted</option><option value="Fostered">Fostered</option><option value="Stepchild">Stepchild</option><option value="Other">Other</option></select></div>`;
            container.querySelector('.remove-button').addEventListener('click', () => container.remove());
            return container;
        }

        function createAddressEntry(index) {
            const container = document.createElement('div');
            container.className = 'dynamic-entry-container space-y-4';
            container.innerHTML = `<button type="button" class="remove-button">&times;</button><h4 class="text-lg font-medium text-gray-800">Address ${index + 1}</h4><div class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4"><div><label for="addressCity_${index}" class="block text-sm font-medium text-gray-700">City</label><input type="text" id="addressCity_${index}" name="addressCity_${index}" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"></div><div><label for="addressCountry_${index}" class="block text-sm font-medium text-gray-700">Country</label><input type="text" id="addressCountry_${index}" name="addressCountry_${index}" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"></div></div>`;
            container.querySelector('.remove-button').addEventListener('click', () => container.remove());
            return container;
        }

        document.getElementById('addChildButton').addEventListener('click', () => {
            childrenContainer.appendChild(createChildEntry(childCount++));
        });
        document.getElementById('addAddressButton').addEventListener('click', () => {
            addressesContainer.appendChild(createAddressEntry(addressCount++));
        });

        document.getElementById('familyHistoryForm').addEventListener('submit', async function(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            const formMessage = document.getElementById('formMessage');
            const submitButton = document.getElementById('submitButton');
            const buttonText = document.getElementById('buttonText');
            const loadingSpinner = document.getElementById('loadingSpinner');

            submitButton.disabled = true;
            buttonText.textContent = 'Submitting...';
            loadingSpinner.classList.remove('hidden');
            formMessage.textContent = '';

            const appsScriptUrl = 'https://script.google.com/macros/s/AKfycbyjvgySqgy5l_-hEuOv3q5THfon63LDJAQStrk-rUDiKh5zKZ2uemurf3bmBFCgBITVug/exec'; 
            if (appsScriptUrl === 'https://script.google.com/macros/s/AKfycbyjvgySqgy5l_-hEuOv3q5THfon63LDJAQStrk-rUDiKh5zKZ2uemurf3bmBFCgBITVug/exec') {
                 setTimeout(() => {
                    formMessage.textContent = "This is a demo. To save data, replace the placeholder URL in the script with your own Google Apps Script URL.";
                    formMessage.className = 'mt-4 text-center text-base font-medium error-message';
                    submitButton.disabled = false;
                    buttonText.textContent = 'Submit Family Member';
                    loadingSpinner.classList.add('hidden');
                 }, 1500);
                 return;
            }
        });

        // --- INITIALIZE PAGE ---
        function initializePage() {
            // Set default tab based on hash or default to first tab
            if (window.location.hash) {
                const targetTab = document.querySelector(`.tab-button[data-target="${window.location.hash}"]`);
                if (targetTab) {
                    setActiveTab(window.location.hash.substring(1));
                } else {
                    setActiveTab('tab-story');
                }
            } else {
                setActiveTab('tab-story');
            }
            
            if (timelineData.length > 0) {
                setActiveTimelineItem(timelineData[0].id);
            }
            
            // Initialize first slide
            showSlide(0);
        }
        initializePage();
    });
    </script>
</body>
</html>